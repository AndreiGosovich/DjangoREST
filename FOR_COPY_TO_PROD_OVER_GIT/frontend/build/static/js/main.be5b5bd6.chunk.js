(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(56)},40:function(e,t,a){},42:function(e,t,a){e.exports=a.p+"static/media/logo.06e73328.svg"},43:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(26),c=a.n(o),l=(a(40),a(25)),s=a(5),u=a(6),i=a(12),m=a(11),p=a(13),h=(a(42),a(43),function(e){var t=e.user;return r.a.createElement("tr",null,r.a.createElement("td",null,t.username),r.a.createElement("td",null,t.firstName),r.a.createElement("td",null,t.lastName),r.a.createElement("td",null,t.email))}),d=function(e){var t=e.users;return r.a.createElement("table",{className:"table table-striped"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"First name"),r.a.createElement("th",null,"Last Name"),r.a.createElement("th",null,"Email")),t.map(function(e){return r.a.createElement(h,{user:e})})))},f=a(8),E=function(e){function t(e){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).call(this,e))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("menu",null,r.a.createElement("ul",{className:"menu list-group-flush"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(f.b,{to:"/"},"Projects")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(f.b,{to:"/todos"},"ToDos")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(f.b,{to:"/users"},"Users")),r.a.createElement("li",{className:"list-group-item"},this.props.is_authenticated?r.a.createElement("button",{onClick:function(){return e.props.logout()}},"Logout (",this.props.currentUser,")"):r.a.createElement(f.b,{to:"/login"},"Login"))))}}]),t}(r.a.Component),b=function(){return r.a.createElement("footer",{className:"page-footer font-small blue"},r.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 G@M"))},g=a(0),v=function(e){var t=e.item,a=e.deleteProject;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(f.b,{to:"/projects/"+t.id},t.id)),r.a.createElement("td",null,t.projectName),r.a.createElement("td",null,t.repoLink),r.a.createElement("td",null,t.users),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return a(t.id)},type:"button",className:"btn btn-outline-danger"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},j=function(e){var t=e.items,a=e.deleteProject,n=Object(g.g)();var o=Object(g.h)().search;return o&&(t=t.filter(function(e){return e.id==o||e.projectName.toLowerCase().indexOf(o.toLowerCase())>-1})),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("label",{for:"search",className:"input-group-text",id:"inputGroup-sizing-default"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),r.a.createElement("input",{type:"text",className:"form-control",name:"search",id:"search"}),r.a.createElement("button",{type:"button",className:"btn btn-light",onClick:function(){var e=document.getElementById("search").value;n.push("/projects/"+e)}},"\u041d\u0430\u0439\u0442\u0438")),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Project name"),r.a.createElement("th",null,"Link to repository"),r.a.createElement("th",null,"Users"),r.a.createElement("th",null)),t.map(function(e){return r.a.createElement(v,{item:e,deleteProject:a})}))),r.a.createElement(f.b,{to:"/projects/create"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442"))},k=function(e){var t=e.item,a=e.deleteToDo;return r.a.createElement("tr",null,r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.project.projectName),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.created),r.a.createElement("td",null,t.updated),r.a.createElement("td",null,t.user.username),r.a.createElement("td",null,String(t.closed)),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return a(t.id)},type:"button",className:"btn btn-outline-danger"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},y=function(e){var t=e.items,a=e.deleteToDo,n=Object(g.g)();var o=Object(g.h)().search;return o&&(t=t.filter(function(e){return e.project.projectName.toLowerCase().indexOf(o.toLowerCase())>-1})),r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("label",{for:"search",className:"input-group-text",id:"inputGroup-sizing-default"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),r.a.createElement("input",{type:"text",className:"form-control",name:"search",id:"search"}),r.a.createElement("button",{type:"button",className:"btn btn-light",onClick:function(){var e=document.getElementById("search").value;n.push("/todos/"+e)}},"\u041d\u0430\u0439\u0442\u0438")),r.a.createElement("table",{className:"table table-striped"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Project"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Updated"),r.a.createElement("th",null,"User"),r.a.createElement("th",null,"Closed"),r.a.createElement("th",null)),t.map(function(e){return r.a.createElement(k,{item:e,deleteToDo:a})})),r.a.createElement(f.b,{to:"/todos/create"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u043a\u0443")))},_=a(16),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={login:"",password:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(_.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.get_token(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{type:"text",name:"login",placeholder:"login=admin99",alue:this.state.login,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password=admin99",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"submit",value:"Login"}))}}]),t}(r.a.Component),C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={project_name:"",repo_link:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(_.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.project_name,this.state.repo_link),e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"project_name"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430"),r.a.createElement("input",{type:"text",className:"form-control",name:"project_name",value:this.state.project_name,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"repo_link"},"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439"),r.a.createElement("input",{type:"text",className:"form-control",name:"repo_link",value:this.state.repo_link,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}))}}]),t}(r.a.Component),O=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={description:"",project:"",user:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(_.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){this.props.createToDo(this.state.description,this.state.project,this.state.user),e.preventDefault()}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"description"},"\u0417\u0430\u043c\u0435\u0442\u043a\u0430"),r.a.createElement("input",{type:"textArea",className:"form-control",name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"project"},"\u041f\u0440\u043e\u0435\u043a\u0442"),r.a.createElement("select",{name:"project",className:"form-control",onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:""}),this.props.projects.map(function(e){return r.a.createElement("option",{value:e.id},e.projectName)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"user"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"),r.a.createElement("select",{name:"user",className:"form-control",onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:""}),this.props.users.map(function(e){return r.a.createElement("option",{value:e.id},e.username)}))),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Save"}))}}]),t}(r.a.Component),S=a(59),D=a(20),w="http://127.0.0.1:8000",x=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h1",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 '",t.pathname,"' \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"))},T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={users:[],projects:[],todos:[],token:"",currentUser:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"set_token",value:function(e){var t=this;(new D.a).set("token",e),this.setState({token:e},function(){return t.load_data()})}},{key:"is_authenticated",value:function(){return""!=this.state.token}},{key:"logout",value:function(){this.set_token(""),this.set_current_user("")}},{key:"get_token_from_storage",value:function(){var e=this,t=(new D.a).get("token");this.setState({token:t},function(){return e.load_data()})}},{key:"set_current_user",value:function(e){(new D.a).set("currentUser",e),this.setState({currentUser:e})}},{key:"get_current_user_from_storage",value:function(){var e=this,t=(new D.a).get("currentUser");this.setState({currentUser:t},function(){return e.load_data()})}},{key:"get_token",value:function(e,t){var a=this;S.a.post(w+"/api/token/",{username:e,password:t}).then(function(t){a.set_token(t.data.access),a.set_current_user(e)}).catch(function(e){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")})}},{key:"get_headers",value:function(){var e={"Content-Type":"application/json"};return this.is_authenticated()&&(e.Authorization="Bearer "+this.state.token),e}},{key:"load_data",value:function(){var e=this,t=this.get_headers();S.a.get(w+"/api/users/",{headers:t}).then(function(t){var a=t.data.results;e.setState({users:a})}).catch(function(t){console.log(t),e.setState({users:[]})}),S.a.get(w+"/api/projects/",{headers:t}).then(function(t){var a=t.data.results;e.setState({projects:a})}).catch(function(t){console.log(t),e.setState({projects:[]})}),S.a.get(w+"/api/todo/",{headers:t}).then(function(t){var a=t.data.results;e.setState({todos:a})}).catch(function(t){console.log(t),e.setState({todos:[]})})}},{key:"createProject",value:function(e,t){var a=this,n=this.get_headers(),r={projectName:e,repoLink:t,users:[]};S.a.post(w+"/api/projects/",r,{headers:n}).then(function(e){var t=e.data;a.setState({projects:[].concat(Object(l.a)(a.state.projects),[t])})}).catch(function(e){return console.log(e)})}},{key:"deleteProject",value:function(e){var t=this,a=this.get_headers();S.a.delete(w+"/api/projects/".concat(e),{headers:a}).then(function(a){t.setState({projects:t.state.projects.filter(function(t){return t.id!==e})})}).catch(function(e){return console.log(e)})}},{key:"deleteToDo",value:function(e){var t=this,a=this.get_headers();S.a.delete(w+"/api/todo/".concat(e),{headers:a}).then(function(a){t.setState({todos:t.state.todos.filter(function(t){return t.id!==e})})}).catch(function(e){return console.log(e)})}},{key:"createToDo",value:function(e,t,a){var n=this,r=this.get_headers(),o={description:e,project:t,user:a};S.a.post(w+"/api/todo/",o,{headers:r}).then(function(e){var t=e.data,a=n.state.projects.filter(function(e){return e.id===t.project})[0];t.project=a;var r=n.state.users.filter(function(e){return e.id===t.user})[0];t.user=r,n.setState({todos:[].concat(Object(l.a)(n.state.todos),[t])})}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){this.get_token_from_storage(),this.get_current_user_from_storage()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"mainApp"},r.a.createElement("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD",crossorigin:"anonymous"}),r.a.createElement("script",{src:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js",integrity:"sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN",crossorigin:"anonymous"}),r.a.createElement(f.a,null,r.a.createElement(E,{is_authenticated:this.is_authenticated(),logout:function(){e.logout()},currentUser:this.state.currentUser}),r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/",component:function(){return r.a.createElement(j,{items:e.state.projects,deleteProject:function(t){return e.deleteProject(t)}})}}),r.a.createElement(g.b,{exact:!0,path:"/users",component:function(){return r.a.createElement(d,{users:e.state.users})}}),r.a.createElement(g.b,{exact:!0,path:"/todos",component:function(){return r.a.createElement(y,{items:e.state.todos,deleteToDo:function(t){return e.deleteToDo(t)}})}}),r.a.createElement(g.b,{exact:!0,path:"/todos/create",component:function(){return r.a.createElement(O,{users:e.state.users,projects:e.state.projects,createToDo:function(t,a,n){return e.createToDo(t,a,n)}})}}),r.a.createElement(g.b,{exact:!0,path:"/todos/:search",component:function(){return r.a.createElement(y,{items:e.state.todos,deleteToDo:function(t){return e.deleteToDo(t)}})}}),r.a.createElement(g.b,{exact:!0,path:"/login",component:function(){return r.a.createElement(N,{get_token:function(t,a){return e.get_token(t,a)}})}}),r.a.createElement(g.b,{exact:!0,path:"/projects/create",component:function(){return r.a.createElement(C,{createProject:function(t,a){return e.createProject(t,a)}})}}),r.a.createElement(g.b,{exact:!0,path:"/projects/:search",component:function(){return r.a.createElement(j,{items:e.state.projects,deleteProject:function(t){return e.deleteProject(t)}})}}),r.a.createElement(g.a,{from:"/projects",to:"/"}),r.a.createElement(g.b,{component:x})),r.a.createElement(b,null)))}}]),t}(r.a.Component),P=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,58)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),o(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null))),P()}},[[31,3,2]]]);
//# sourceMappingURL=main.be5b5bd6.chunk.js.map